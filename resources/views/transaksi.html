<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaksi Pesanan - SiLaundry</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .hidden-summary { display: none; }
    </style>
</head>
<body class="bg-gray-100 font-sans flex">

    <div class="w-64 bg-[#1e3a8a] h-screen sticky top-0 text-white p-4">
            <div class="mb-8 px-2 flex items-center space-x-2">
                <i class="fas fa-tshirt text-2xl text-blue-300"></i>
                <h1 class="text-2xl font-bold italic">SiLaundry</h1>
            </div>
        <nav class="space-y-1">
            <a href="index.html" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-800 transition">
                <i class="fas fa-home w-6"></i> <span>Dashboard</span>
            </a>
            <a href="transaksi.html" class="flex items-center space-x-3 p-3 rounded-lg bg-blue-700 border-l-4 border-blue-400">
                <i class="fas fa-shopping-cart w-6"></i> <span>Transaksi Pesanan</span>
            </a>
            <a href="pelanggan.html" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-800 transition">
                <i class="fas fa-users w-6"></i> <span>Pelanggan</span>
            </a>
            <a href="kurir.html" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-800 transition">
                <i class="fas fa-truck w-6"></i> <span>Kurir</span>
            </a>
            <a href="layanan.html" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-800 transition">
                <i class="fas fa-tags w-6"></i> <span>Layanan & Satuan</span>
            </a>
        </nav>
    </div>

    <div class="flex-1 p-8">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800">Tambah Pesanan Baru</h2>
            <button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">Kembali</button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-2 space-y-6">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="text-lg font-semibold mb-4 border-b pb-2">Informasi Dasar</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Pilih Pelanggan</label>
                            <select id="pelanggan" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <option value="">-- Pilih Pelanggan --</option>
                                <option value="PL001">PL001 - Budi Santoso</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Kurir Penjemput (Opsional)</label>
                            <select id="kurir" class="w-full p-2 border border-gray-300 rounded-md">
                                <option value="">-- Tanpa Kurir --</option>
                                <option value="KR01">KR01 - Ahmad (Motor)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Tanggal Masuk</label>
                            <input type="date" class="w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Estimasi Selesai</label>
                            <input type="date" class="w-full p-2 border border-gray-300 rounded-md">
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="text-lg font-semibold mb-4 border-b pb-2">Rincian Item</h3>
                    
                    <div class="mb-6 p-4 bg-blue-50 rounded-lg border border-blue-100">
                        <h4 class="font-bold text-blue-800 mb-2">Layanan Kiloan (Kosongkan jika tidak ada)</h4>
                        <div class="grid grid-cols-3 gap-4">
                            <select id="paket_kiloan" class="p-2 border border-gray-300 rounded-md">
                                <option value="0">Pilih Paket...</option>
                                <option value="5000">Cuci Kering (Rp 5.000)</option>
                                <option value="8000">Cuci Setrika (Rp 8.000)</option>
                            </select>
                            <input type="number" id="berat" placeholder="Berat (Kg)" class="p-2 border border-gray-300 rounded-md">
                        </div>
                    </div>

                    <h4 class="font-bold text-gray-700 mb-2">Layanan Satuan</h4>
                    <table class="w-full mb-4">
                        <thead>
                            <tr class="text-left text-xs uppercase text-gray-500 border-b">
                                <th class="pb-2">Jenis Barang</th>
                                <th class="pb-2">Jumlah</th>
                                <th class="pb-2">Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="satuan-body">
                            <tr>
                                <td class="py-2">
                                    <select class="w-full p-2 border-gray-300 rounded-md text-sm item-satuan">
                                        <option value="0">-- Pilih Barang --</option>
                                        <option value="25000">Bedcover Besar</option>
                                        <option value="15000">Jas</option>
                                    </select>
                                </td>
                                <td><input type="number" value="0" class="w-16 p-2 border border-gray-200 rounded qty-satuan"></td>
                                <td><button class="text-red-500" onclick="this.parentElement.parentElement.remove()"><i class="fas fa-times"></i></button></td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="mt-8 pt-4 border-t flex justify-end">
                        <button onclick="hitungTotal()" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-xl font-bold transition shadow-lg">
                            <i class="fas fa-calculator mr-2"></i> HITUNG TOTAL
                        </button>
                    </div>
                </div>
            </div>

            <div id="summary-section" class="hidden-summary">
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-blue-600 sticky top-8">
                    <h3 class="text-lg font-bold mb-4 uppercase text-gray-700">Ringkasan Biaya</h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-500">Subtotal Kiloan</span>
                            <span id="res-kiloan" class="font-medium text-gray-800">Rp 0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">Subtotal Satuan</span>
                            <span id="res-satuan" class="font-medium text-gray-800">Rp 0</span>
                        </div>
                        <hr>
                        <div class="flex justify-between items-center py-2">
                            <span class="text-lg font-bold text-gray-900">Total Biaya</span>
                            <span id="res-total" class="text-2xl font-black text-blue-700">Rp 0</span>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Catatan</label>
                        <textarea class="w-full p-2 border border-gray-300 rounded-md h-20 text-sm" placeholder="Catatan tambahan..."></textarea>
                        <button class="w-full mt-4 bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition">
                            SIMPAN TRANSAKSI
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function hitungTotal() {
            // Logika hitung kiloan
            const hargaKiloan = parseFloat(document.getElementById('paket_kiloan').value) || 0;
            const berat = parseFloat(document.getElementById('berat').value) || 0;
            const subKiloan = hargaKiloan * berat;

            // Logika hitung satuan
            let subSatuan = 0;
            const items = document.querySelectorAll('.item-satuan');
            const qtys = document.querySelectorAll('.qty-satuan');
            
            items.forEach((item, index) => {
                const harga = parseFloat(item.value) || 0;
                const qty = parseFloat(qtys[index].value) || 0;
                subSatuan += (harga * qty);
            });

            const total = subKiloan + subSatuan;

            // Update Tampilan
            document.getElementById('res-kiloan').innerText = "Rp " + subKiloan.toLocaleString();
            document.getElementById('res-satuan').innerText = "Rp " + subSatuan.toLocaleString();
            document.getElementById('res-total').innerText = "Rp " + total.toLocaleString();

            // Munculkan Section Ringkasan
            document.getElementById('summary-section').classList.remove('hidden-summary');
            
            // Scroll ke arah ringkasan jika di mobile
            document.getElementById('summary-section').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>